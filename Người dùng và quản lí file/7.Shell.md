# Shell

## 1. `Shell` lÃ  gÃ¬?

**`shell`** lÃ  má»™t **giao diá»‡n dÃ²ng lá»‡nh**, hoáº·c lÃ  má»™t **giao diá»‡n ngÆ°á»i dÃ¹ng** Ä‘Æ¡n giáº£n dá»±a trÃªn vÄƒn báº£n cho phÃ©p truy cáº­p vÃ o dá»‹ch vá»¥ cÆ¡ báº£n **há»‡ Ä‘iá»u hÃ nh**. ChÃºng háº§u nhÆ° hoáº¡t Ä‘á»™ng giá»‘ng nhau nhÆ° sau : 

1. Giao diá»‡n ngÆ°á»i dÃ¹ng hiá»‡n lÃªn vá»›i **`prompt`**
2. NgÆ°á»i dÃ¹ng `gÃµ lá»‡nh` vÃ  `enter`
3. **`Shell`** thÃ´ng dá»‹ch lá»‡nh vÃ  cá»‘ gáº¯ng thá»±c hiá»‡n 
4. **`Shell`** pháº£n há»“i cho ngÆ°á»i dÃ¹ng nhá»¯ng thá»© lÃ  lá»‡nh hoáº¡t Ä‘á»™ng
5. Má»™t khi lá»‡nh Ä‘Ã£ hoÃ n thÃ nh, ngÆ°á»i dÃ¹ng sáº½ Ä‘Æ°á»£c **`prompt`** má»›i

### `Shell` trong Unix

Trong há»‡ Ä‘iá»u hÃ nh dá»±a trÃªn **`Unix`** giá»‘ng vá»›i **`Linux`**, Pháº§n lá»›n lá»‡nh **`shell`** Ä‘iá»u láº¥y xuá»‘ng tá»« **`sh`** (cÃ²n gá»i lÃ  `Bourne shell`), nÃ³ Ä‘Æ°á»£c ra máº¯t vÃ o nÄƒm `1979`. Hiá»‡n nay, pháº§n lá»›n shell máº·c Ä‘á»‹nh cá»§a há»‡ Ä‘iá»u hÃ nh dá»±a trÃªn **`Unix`** lÃ  **`bash`** (gá»i lÃ  `Bourne again shell`). **`bash`** vÆ°á»£t xa cÃ¡c háº§u háº¿t shell.

**`Prompt bash`** cá»• Ä‘iá»ƒn trÃ´ng nhÆ° tháº¿ nÃ y:

```shell
zenfection@zenos Desktop $
```

`zenfection` chÃ­nh lÃ  tÃªn cá»§a ngÆ°á»i dÃ¹ng, cÃ²n `zenos` lÃ  tÃªn cá»§a há»‡ thá»‘ng mÃ¡y tÃ­nh. `Desktop` lÃ  directory hiá»‡n táº¡i, cÃ²n `$` lÃ  **`prompt`**

#### `Shells` khÃ¡c

Má»™t sá»‘ **`shell`** khÃ¡c bao gá»“m **`zsh`** (**Z shell**), **`ksh`** (**Korn shell**), **`ash`**(**Almquist shell**), **`fish`**(**friendly interactive shell**), vÃ  nhiá»u ná»¯a ...

Má»i **`shell`** Ä‘iá»u cÃ³ cÃº phÃ¡p ban hÃ nh riÃªng cá»§a chÃºng, máº·c dÃ¹ thÆ°á»ng giá»‘ng nhau.

## 2. Biáº¿n mÃ´i trÆ°á»ng cÆ¡ báº£n

Biáº¿n mÃ´i trÆ°á»ng cÃ³ tÃ­nh Ä‘á»™ng, biáº¿n Ä‘Æ°á»£c Ä‘áº·t tÃªn cÃ³ thá»ƒ áº£nh hÆ°á»Ÿng Ä‘áº¿n cÃ¡ch cÃ¡c quy trÃ¬nh hoáº¡t Ä‘á»™ng trÃªn mÃ¡y tÃ­nh.

**VÃ­ dá»¥:** Má»™t quÃ¡ trÃ¬nh cÃ³ thá»ƒ tÃ¬m kiáº¿m biáº¿n mÃ´i trÆ°á»ng **`HOME`** xÃ¡c Ä‘á»‹nh ngÆ°á»i dÃ¹ng hiá»‡n táº¡i cá»§a `home` directory.

### Biáº¿n mÃ´i trÆ°á»ng chung

Trong Linux hoáº·c nhá»¯ng há»‡ Ä‘iá»u hÃ nh dá»±a trÃªn Unix, nhá»¯ng biáº¿n mÃ´i trÆ°á»ng chung gá»“m: 

- **`HOME`** , nÃ³ chá»©a `home`directory cá»§a ngÆ°á»i dÃ¹ng hiá»‡n táº¡i
- **`PATH`** , nÃ³ chá»©a danh sÃ¡ch cÃ¡c Ä‘Æ°á»ng dáº«n directory. Khi ngÆ°á»i dÃ¹ng gÃµ lá»‡nh mÃ  khÃ´ng cÃ³ Ä‘Æ°á»ng dáº«n cá»¥ thá»ƒ, **`bash`** sáº½ tÃ¬m xem trong biáº¿n mÃ´i trÆ°á»ng **`PATH`** cÃ³ nÃ³ khÃ´ng.
- **`PS1`** , nÃ³ chá»‰ Ä‘á»‹nh cho **`prompt`** hiá»‡n lÃªn mÃ n hÃ¬nh.
- **`EDITOR`**, chá»‰ Ä‘á»‹nh cho trÃ¬nh gÃµ text máº·c Ä‘á»‹nh.
- **`LANG`**, nÃ³ chá»‰ Ä‘á»‹nh cho ngÃ´n ngá»¯ ngÆ°á»i dÃ¹ng...

### Hiá»‡n mÃ n hÃ¬nh biáº¿n mÃ´i trÆ°á»ng

Sá»­ dá»¥ng lá»‡nh **`env`** Ä‘á»ƒ xem danh sÃ¡ch cÃ¡c biáº¿n mÃ´i trÆ°á»ng hiá»‡n táº¡i (Coi láº¡i [bÃ i 2](https://github.com/Zenfection/Linux-for-babies/blob/master/NgÆ°á»i%20dÃ¹ng%20vÃ %20quáº£n%20lÃ­%20file/2.Biáº¿n%20mÃ´i%20trÆ°á»ng.md))

VÃ­ dá»¥:

```shell
$ env
USER=zen
HOME=/home/zen
...    ...
EDITOR=vim
$
```

Biáº¿n mÃ´i trÆ°á»ng **`USER`** cho giÃ¡ trá»‹ `zen` trong khi biáº¿n mÃ´i trÆ°á»ng **`HOME`** cho giÃ¡ trá»‹ lÃ  ``/home/zen``. Báº¡n cÃ³ thá»ƒ sá»­ dá»¥ng lá»‡nh **`echo`** Ä‘á»ƒ in ra mÃ n hÃ¬nh nhá»¯ng biáº¿n mÃ´i trÆ°á»ng Ä‘Ã³ nhÆ° sau:

```shell
$ echo $HOME
/home/zen
$
```

Khi xem giÃ¡ trá»‹ cá»§a biáº¿n mÃ´i trÆ°á»ng báº¡n pháº£i sá»­ dá»¥ng `$` trÆ°á»›c tÃªn cá»§a nÃ³, náº¿u khÃ´ng nÃ³ chá»‰ hiá»‡n ra tháº¿ nÃ y : 

```shell
$ echo HOME
HOME
$
```

NhÆ° báº¡n cÃ³ thá»ƒ tháº¥y lá»‡nh **`echo $HOME`** lÃ  in ra mÃ n hÃ¬nh giÃ¡ trá»‹ cá»§a **`HOME`** cÃ²n lá»‡nh **`echo HOME`** lÃ  in ra mÃ n hÃ¬nh chuá»—i "HOME".

### 3. Máº¹o nhanh vá» lá»‡nh `cd`

Lá»‡nh **`pushd`** lÆ°u láº¡i hoáº¡t Ä‘á»™ng cá»§a directory hiá»‡n táº¡i trÃªn bá»™ nhá»› nÃªn lÃ  nÃ³ cÃ³ thá»ƒ trá»Ÿ láº¡i báº¥t ká»³ lÃºc nÃ o. Báº¡n cÃ³ thá»ƒ nghÄ© nÃ³ nhÆ° lÃ  sá»± phÃ¡t triá»ƒn cá»§a **`cd`** , bá»Ÿi vÃ¬ **`pushd`** lÆ°u trá»¯ lá»‹ch sá»­ truy cáº­p folders cá»§a báº¡n.

Chuyá»ƒn sÃ¡ng má»™t directory má»›i, báº¡n hÃ£y sá»­ dá»¥ng:

```shell
~$ push projects/
~/projects  ~
~/projects  $
```

Sau khi gá»i lá»‡nh **`pushd`**, directory Ä‘Æ°á»£c xáº¿p vÃ o shell.

Náº¿u báº¡n muá»‘n thÃªm ngÄƒn xáº¿p vÃ o directory hiá»‡n táº¡i, báº¡n hÃ£y gá»i **`pushd`**:

```shell
~/projects/project_1 $pushd
~ ~/projects/project_1
~ $
```

ChÃº Ã½ ráº±ng trÆ°á»ng há»£p nÃ y, báº¡n cÃ³ thá»ƒ trá»Ÿ láº¡i directory Ä‘áº§u tiÃªn trong hÃ ng Ä‘á»£i cá»§a báº¡n.

Äá»ƒ kiá»ƒm tra ngÄƒn xáº¿p cá»§a directory, sá»­ dá»¥ng lá»‡nh **`dirs`**:

```shell
~ $ dirs
~ ~/1 ~/projects/project_1
# thÃªm lá»‡nh -v
# bao gá»“m cÃ¡c chá»‰ má»¥c
# vÃ  tÄƒng kháº£ nÄƒng Ä‘á»c
~ $ dirs -v
0 ~/projects/project_1
```

**ChÃº Ã½:** Má»¥c Ä‘áº§u tiÃªn trong ngÄƒn xáº¿p sáº½ luÃ´n luÃ´n á»Ÿ directory hiá»‡n táº¡i.

Äá»ƒ ngÄƒn xáº¿p khÃ´ng rá»‘i, thÃªm **`+n`** vÃ o **`pushd`**, `n` lÃ  sá»‘ má»¥c ngÄƒn xáº¿p. HÃ£y xem máº«u sau Ä‘Ã¢y:

```shell
~ $ dirs -v
0 ~
1 ~/projects/project_1
2 ~/projects/project_2
~ $ pushd +2
~projects/project_2 $
```

Äá»ƒ xoÃ¡ má»¥c báº¥t ká»³ khá»i ngÄƒn xáº¿p, ta dÃ¹ng lá»‡nh **`popd`**. Náº¿u Ä‘Ã£ sá»­ dá»¥ng khÃ´ng cÃ³ Ä‘á»‘i sá»‘, nÃ³ xoÃ¡ pháº§n tá»­ Ä‘áº§u tiÃªn trong ngÄƒn xáº¿p (chÃ­nh lÃ  index 0 trong directory hiá»‡n táº¡i hoáº¡t Ä‘á»™ng), vÃ  chuyá»ƒn Ä‘á»•i qua hoáº¡t Ä‘á»™ng má»¥c directory tiáº¿p theo. Náº¿u báº¡n sá»­ dá»¥ng vá»›i **`+n`**  Ä‘á»‘i sá»‘, nÃ³ sáº½ xoÃ¡ `n`Â pháº§n tá»­ tá»« ngÄƒn xáº¿p, nhÆ°ng **khÃ´ng** thay Ä‘á»•i directory hoáº¡t Ä‘á»™ng hiá»‡n táº¡i.

```shell
~ $dirs -v
0 ~
1 ~/projects/project_1
2 ~/projects/project_2

~/projects/project_2 $ popd
~/project/project_1

~/projects/project_1 $ dirs -v
0 ~/projects/project_1
1 ~/projects/project_2

~/projects/project_1 $ popd +1
~/projects/project_1

~/projects/project_1 $ 
```

Äá»ƒ dá»n sáº¡ch ngÄƒn xáº¿p, hÃ£y thÃªm **`-c`** vÃ o sau lá»‡nh **`dirs`** :

```shell
~projects/projec_1 $ dirs -c
```

Hoáº·c, hoÃ n tÃ¡c láº¡i láº§n thay Ä‘á»•i cuá»‘i cÃ¹ng cá»§a directory vÃ  trá»Ÿ láº¡i Ä‘Æ°á»ng dáº«n Ä‘Ã³ nhÆ° sau:

```shell
$ cd ~
```

| ğŸŒÂ [NgÄƒn xáº¿p Directory](https://www.gnu.org/software/bash/manual/html_node/The-Directory-Stack.html) | ğŸ“±Â [XÃ¢y dá»¥ng ngÄƒn xáº¿p Directory](https://www.gnu.org/software/bash/manual/html_node/Directory-Stack-Builtins.html#Directory-Stack-Builtins) |
| ---------------------------------------------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------- |

## 4. Terminal dá»±a trÃªn trÃ¬nh duyá»‡t

Báº¡n cÃ³ thá»ƒ duyá»‡t web tá»« trong terminal báº±ng  **`lynx`**

```shell
$ lynx https://google.com
```

Äá»ƒ cÃ³ Ä‘Æ°á»£c lynx, ta pháº£i cÃ i Ä‘áº·t gÃ³i `lynx-cur` (dÃ nh cho OS dá»±a trÃªn Debian) nhÆ° sau:

```shell
sudo apt-get install lynx-cur
```

## 5. CÃ¡ch Ä‘á»ƒ gá»i editor Ä‘á»ƒ viáº¿t mÃ£ cÆ¡ báº£n tá»›i phá»©c táº¡p

Láº§n tá»›i khi báº¡n sá»­ dá»¥ng shell cá»§a báº¡n vÃ  cáº§n enter 1 dÃ²ng lá»‡nh dÃ i.

HÃ£y thá»­ lá»‡nh **`ctrl-x e`** (tá»©c lÃ  nháº¥n giá»¯ **`ctrl`** sau Ä‘Ã³ nháº¥n **`x`** vÃ  **`e`** )

Shell sáº½ láº¥y nhá»¯ng gÃ¬ báº¡n Ä‘Ã£ ghi nhá»¯ng mÃ£ ráº¥t dÃ i vÃ  `paste` vÃ o trong trÃ¬nh editor chá»‰ Ä‘á»‹nh sáºµn lÃ  **`$EDITOR`**. Sau Ä‘Ã³ báº¡n cÃ³ thá»ƒ chá»‰nh sá»­a Ä‘Æ¡n giáº£n sá»­ dá»¥ng táº¥t cáº£ tÃ­nh nÄƒng  cá»§a `vi`,`emac`,`nano` ...

| ğŸ”™Â [BÃ i 6.Máº¹o quáº£n lÃ­ file](https://github.com/Zenfection/Linux-for-babies/blob/master/NgÆ°á»i%20dÃ¹ng%20vÃ %20quáº£n%20lÃ­%20file/6.Máº¹o%20quáº£n%20lÃ­%20file.md) | [BÃ i 8.Pipelines](https://github.com/Zenfection/Linux-for-babies/blob/master/NgÆ°á»i%20dÃ¹ng%20vÃ %20quáº£n%20lÃ­%20file/8.PIPELINES.md)Â  ğŸ”œ |
| -------------------------------------------------------------------------------------------------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------- |
