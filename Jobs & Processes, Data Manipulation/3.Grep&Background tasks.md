# Grep vÃ  tÃ¡c vá»¥ cháº¡y ná»n

CÃ¡ch sá»­ dá»¥ng cÆ¡ báº£n cá»§a lá»‡nh **`grep`** Ä‘á»ƒ tÃ¬m kiáº¿m chuá»—i xÃ¡c Ä‘á»‹nh trong file cá»¥ thá»ƒ nhÆ° sau:

```shell
grep "some_string" some_file
```

Äá»ƒ tÃ¬m kiáº¿m **`"require"`** trong táº¥t cáº£ **files** vá»›i tiá»‡n Ã­ch **`.js`** trong má»™t **`directory`**, chÃºng tÃ´i phÃ¡t hÃ nh nÃ³ vá»›i má»™t **`*`** nhÆ° sau:

```shell
grep "require" *.js
```

Máº·c Ä‘á»‹nh thÃ¬ nÃ³ cÃ³ phÃ¢n biá»‡t chá»¯ thÆ°á»ng-hoa. Sá»­ dá»¥ng tuá»³ chá»n **`-i`** náº¿u báº¡n muá»‘n tÃ¬m kiáº¿m khÃ´ng phÃ¢n biá»‡t hoa thÆ°á»ng:

```shell
grep -i "http_access" squid.conf
```

Äá»ƒ tÃ¬m kiáº¿m Ä‘á»‡ quy (trong **directory** hiá»‡n táº¡i vÃ  má»i **subdirectories**), sá»­ dá»¥ng tuá»³ chá»n **`-r`** nhÆ° sau:

```shell
grep -r "require"
```

Äá»ƒ láº¥y sá»‘ Ä‘áº¿m, hÃ£y sá»­ dá»¥ng tuá»³ chá»n **`-c`** nhÆ° sau:

```shell
grep -c "session opened" /var/log/auth/log
```

---

## 2. Xem tÃ i nguyÃªn sá»­ dá»¥ng vá»›i **`top`**

Trong khi lá»‡nh **`ps`** sáº½ hiá»‡n thá»‹ **snapshot** cá»§a tiáº¿n trÃ¬nh Ä‘ang cháº¡y hiá»‡n táº¡i, lá»‡nh **`top`** sáº½ tiáº¿p diá»…n Ä‘iá»u Ä‘Ã³, cÃ³ thá»ƒ sáº¯p xáº¿p hiá»‡n thá»‹. **`top`** thÆ°á»ng sá»­ dá»¥ng Ä‘á»ƒ xem tiáº¿n trÃ¬nh mÃ  Ä‘ang tiÃªu thá»¥ nhiá»u **CPU** hoáº·c **memory** (*Ram*).

ÄÃ¢y lÃ  má»™t sá»‘ vÃ­ dá»¥ vá» Ä‘áº§u ra cá»§a lá»‡nh **`top`**, sáº¯p xáº¿p theo viá»‡c sá»­ dá»¥ng **memory**.

![2020-08-16 20.19.45.gif](https://raw.githubusercontent.com/Zenfection/Image/master/2020/08/16-20-22-33-2020-08-16%2020.19.45.gif)

Báº¡n cÃ³ thá»ƒ Ä‘á»c hÆ°á»›ng dáº«n vÃ  há»c cÃ¡ch sá»­ dá»¥ng lá»‡nh **`top`** báº±ng cÃ¡ch gÃµ **`man top`** trÃªn **terminal**. Trong Linux cÃ³ má»™t sá»‘ tuá»³ chá»n phá»• biáº¿n sau Ä‘Ã¢y:

- GÃµ **`P`** Ä‘á»ƒ sáº¯p xáº¿p theo sá»­ dá»¥ng **CPU** (hÃ£y nhá»› lÃ  **`P`** chá»© khÃ´ng pháº£i lÃ  **`p`**)
- GÃµ **`M`** Ä‘á»ƒ sáº¯p xáº¿p theo sá»­ dá»¥ng **memory**
- GÃµ **`<`** Ä‘á»ƒ di chuyá»ƒn sáº¯p xáº¿p cá»™t vá» **bÃªn trÃ¡i**
- GÃµ **`>`** Ä‘á»ƒ di chuyá»‡n sáº¯p xáº¿p cá»™t vá» **bÃªn pháº£i**
- GÃµ **`q`** Ä‘á»ƒ thoÃ¡t

---

## 3. TÃ¡c vá»¥ cháº¡y ná»n

ÄÃ´i lÃºc chÃºng ta cáº§n thá»±c thi má»™t tÃ¡c vá»¥ mÃ  tÃ¡c vá»¥ Ä‘Ã³ vÃ i phÃºt nhÆ°ng tÃ¡c vá»¥ bá»‹ cháº·n mÃ n hÃ¬nh, báº¡n chá»‰ cÃ³ thá»ƒ dÃ¹ng **Terminal** Ä‘á»ƒ xem nÃ³.

Trong tÃ¬nh hÃ¬nh nÃ y, nÃ³ cÃ³ thá»ƒ tiá»‡n lá»£i khi chá»‰ cháº¡y ná»n tÃ¡c vá»¥ báº±ng cÃ¡ch thÃªm **`&`** vÃ  cuá»‘i dÃ²ng lá»‡nh nhÆ° sau:

```shell
./backup_script.sh &
```

Nhiá»‡m vá»¥ cÃ³ thá»ƒ hiá»ƒn thá»‹ lÃªn má»™t sá»‘ thÃ´ng bÃ¡o trong khi nÃ³ thá»±c thi, nhÆ°ng báº¡n cÃ³ thá»ƒ cháº·n nÃ³ in ra cÃ¡c thÃ´ng bÃ¡o báº±ng cÃ¡ch chuyá»ƒn hÆ°á»›ng Ä‘áº§u ra **``/dev/null``** (*chá»‰ in lá»—i gáº·p pháº£i*): 

```shell
./backup_script.sh > /dev/null &
```

Hoáº·c, trong trÆ°á»ng há»£p nÃ y báº¡n muá»‘n táº¯t thÃ´ng bÃ¡o lá»—i, gÃµ nhÆ° sau:

```shell
./backup_script.sh 2> /dev/null &
```

---

## 4. CÃ¡ch Ä‘á»ƒ dá»«ng má»™t tiáº¿n trÃ¬nh vÃ  cháº¡y má»™t tiáº¿n trÃ¬nh khÃ¡c trong ná»n

```shell
CTRL+Z # dá»«ng má»™t á»©ng dá»¥ng
```

```shell
fg # trá»Ÿ vá» á»©ng dá»¥ng gáº§n Ä‘Ã¢y nháº¥t
bg # gá»­i má»™t tiáº¿n trÃ¬nh dá»«ng láº¡i Ä‘á»ƒ cháº¡y trong ná»n
```

HÃ£y Ä‘á»ƒ báº¡n Ä‘Æ°á»£c má»Ÿ má»™t **file** trong **`nano`** (*terminal text editor*) nhÆ° dÆ°á»›i Ä‘Ã¢y:

```shell
nano kiet.txt
```

Giá»¯a chá»«ng khi nháº­p vÄƒn báº£n vÃ o **file** báº¡n nháº­n ra ráº±ng báº¡n cáº§n gÃµ lá»‡nh nhanh hÆ¡n chÆ°Æ¡ng trÃ¬nh khÃ¡c vÃ o **terminal**

Äá»ƒ lÃ m Ä‘Æ°á»£c táº¥t cáº£ Ä‘iá»u Ä‘Ã³ báº¡n hÃ£y nháº¥n giá»¯ **`CTRL+Z`** nÃ³ sáº½ buá»™c cÃ¡c á»©ng dá»¥ng ná»n trÆ°á»›c sáº½ dá»«ng vÃ  Ä‘Æ°a báº¡n tráº£ láº¡i **terminal**. Báº¡n sau Ä‘Ã³ cÃ³ thá»ƒ cháº¡y báº¥t ká»³ lá»‡nh nÃ o báº¡n thÃ­ch vÃ  sau khi hoÃ n thÃ nh lá»‡nh báº¡n enter **`fg`**,nháº¥n quay láº¡i vÃ  báº¡n sáº½ quay láº¡i phiÃªn bá»‹ táº¡m dá»«ng.

Náº¿u báº¡n cÃ³ nhiá»u hÆ¡n má»™t tiáº¿n trÃ¬nh bá»‹ dá»«ng, báº¡n cÃ³ thá»ƒ hiá»ƒn thá»‹ danh sÃ¡ch chÃºng nhÆ° sau:

```shell
jobs
[1]+     Stopped        nano kiet.txt
#^jobID
```

Äiá»u nÃ y sáº½ tráº£ vá» ID tiáº¿n trÃ¬nh mÃ  báº¡n cÃ³ thá»ƒ sá»­ dá»¥ng mang nÃ³ trá»Ÿ vá» tiáº¿n trÃ¬nh trÆ°á»›c

```shell
fg %jobID
```

hoáº·c lÃ m nÃ³ cháº¡y trong ná»n nhÆ° sau:

```shell
bg %jobID
```

hoáº·c **kill** nÃ³:

```shell
kill processID
```

Sá»± khÃ¡c nhau giá»¯a *job IDs* vÃ  *IDs tiáº¿n trÃ¬nh* lÃ  cÃ¡i *jobs* dÃ nh riÃªng cho má»™t **`shell`**. Do Ä‘Ã³, *job ID* vÃ  *ID tiáº¿n trÃ¬nh* cÃ¹ng má»™t tiáº¿n trÃ¬nh cÃ³ thá»ƒ khÃ¡c nhau:

```shell
jobs -l
[1]+  3720  Stopped    nano abc.txt
#        ^processID
```

### TÃ¬m hiá»ƒu thÃªm

| ğŸŒÂ [Tiáº¿n trÃ¬nh cháº¡y ná»n](http://www.cyberciti.biz/faq/linux-command-line-run-in-background/) |
| -------------------------------------------------------------------------------------------- |

---

## 5. Äáº·t tiáº¿n trÃ¬nh Æ°u tiÃªn

**`Nice`** lÃ  má»™t lá»‡nh trong há»‡ Ä‘iá»u hÃ nh **Unix** vÃ  **Linux** cho phÃ©p Ä‘iá»u chá»‰nh giÃ¡ trá»‹ "*niceness*" cá»§a tiáº¿n trÃ¬nh.

Äiá»u chá»‰nh giÃ¡ trá»‹ '*niceness*' cá»§a tiáº¿n trÃ¬nh cho phÃ©p cÃ i Ä‘áº·t má»©c Æ°u tiÃªn CPU khuyáº¿t nghá»‹  cá»§a **kernel** sáº½ sá»­ dá»¥ng vÃ o má»¥c Ä‘Ã­ch mÃ  tiáº¿n trÃ¬nh Ä‘Ã³ láº¥y nhiá»u hoáº·c Ã­t thá»i gian **CPU**.

Trong **Linux** thÃ¬ giÃ¡ trá»‹ *niceness* cÃ³ thá»ƒ bá» qua bá»Ÿi **scheduler**, tuy nhiÃªn **Unix** thá»±c hiá»‡n cÃ³ thá»ƒ khÃ¡c.

CÃ´ng cá»¥ **`renice`** cho phÃ©p chÃºng ta thay Ä‘á»•i mÃºc Ä‘á»™ Æ°u tiÃªn cá»§a tiáº¿n trÃ¬nh Ä‘ang cháº¡y.

Æ¯u tiÃªn bao gá»“m tá»« **`-20`** tá»›i **`19`**

**`-20`** lÃ  giÃ¡ trá»‹ tá»‘t nháº¥t Ä‘áº¡i diá»‡n cho Ä‘á»™ Æ°u tiÃªn cao nháº¥t, trong khi **`19`** lÃ  giÃ¡ trá»‹ Ä‘áº¡i diá»‡n cho Ä‘á»™ Æ°u tiÃªn kÃ©m nháº¥t.

Äá»ƒ giáº£m Ä‘á»™ Æ°u tiá»‡n cá»§a má»™t tiáº¿n trÃ¬nh Ä‘ang cháº¡y, ta cháº¡y **cÃº phÃ¡p sau**:

```shell
renice new_priority -p PID_OF_THE_PROCESS
```

**VÃ­ dá»¥ cá»¥ thá»ƒ nhÆ° sau:**

```shell
$ renice 16  -p 13245
13245 old priority 10, new priority 16
```

CÅ©ng nhÆ° tháº¿ nhÆ°ng tÄƒng Ä‘á»™ Æ°u tiÃªn nhÆ° sau:

```shell
$ renice 5 -p 13254
13254: old priority 16, new priority 5
```

| ğŸ”™Â [BÃ i 2.File streams](https://github.com/Zenfection/Linux-for-babies/blob/master/Jobs%20%26%20Processes%2C%20Data%20Manipulation/2.File%20Streams.md) |     |
| ------------------------------------------------------------------------------------------------------------------------------------------------------- | --- |
